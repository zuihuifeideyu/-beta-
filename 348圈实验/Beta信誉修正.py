import numpy as np
import pandas as pd
import networkx as nx
import matplotlib.pyplot as plt
import scipy
import random
from scipy.stats import pearsonr

#全局信任节点
f = '修正后节点信任值.txt'
fn = open(f, 'w')

#初始平均信任度计算
tr = np.loadtxt('节点信任值计算.txt', delimiter=' ')
tr1 = np.delete(tr, [0] , axis = 1)
tr_node_name = np.loadtxt('节点信任值计算.txt' , usecols=(0,) , dtype=str)
#print(tr1)
#print(tr_node_name)
sum = 0.0
for i in tr1:
    sum = sum + float(i)
p_sum = sum/len(tr1)
print(p_sum)
#0.3


ls_name = ['436', '428', '450', '531', '538', '404', '565', '412', '471', '461', '544', '414', '465', '546', '547', '475', '446', '536', '398', '367', '452', '560', '493', '361', '359', '402', '520', '567', '542', '510', '521', '559', '557', '376', '555', '500', '469', '516', '378', '482', '418', '506', '514', '545', '525', '484', '492', '479', '373', '483', '173', '549', '460', '517', '395', '370', '396', '416', '368', '503', '423', '457', '477', '524', '364', '441', '400', '548', '515', '434', '496', '382', '474', '451', '409', '526', '363', '371', '420', '432', '448', '563', '508', '440', '444', '523', '561', '365', '507', '397', '439', '497', '513', '387', '408', '512', '394', '419', '527', '443', '453', '403', '504', '422', '413', '495', '553', '458', '426', '540', '470', '519', '511', '556', '558', '372', '392', '445', '417', '566', '353', '490', '464', '552', '488', '374', '476', '533', '355', '463', '388', '438', '442', '375', '491', '354', '543', '456', '455', '366', '467', '572', '539', '424', '537', '391', '425', '360', '421', '430', '427', '407', '357', '568', '405', '473', '431', '350', '369', '466', '429', '551', '381', '410', '486', '459', '487', '569', '494', '481', '502', '570', '362', '198', '399', '352', '489', '389', '501', '564', '454', '351', '435', '437', '528', '518', '380', '390', '462', '532', '498', '509', '554', '449', '541', '415', '571', '480', '468', '406', '505', '433', '478', '349', '535', '385', '534', '562', '529', '522', '485', '34', '356', '411', '384', '393', '530', '472', '386', '499', '379', '401', '377', '383']

with open('邻居节点汇总.txt', 'r') as f:
    my_data = f.readlines() #txt中所有字符串读入data，得到的是一个list
    # 对list中的数据做分隔和类型转换
#    print(my_data)
#    for line in my_data:
#       line_data = line.split()
#       print (line_data)
print(len(my_data))

for i in range(len(ls_name)):
    line_data = my_data[i].split()
    nbr_nodes_number = len(line_data)
    s = float(tr1[i])*nbr_nodes_number/224
    fn.write(ls_name[i]+' '+str(s))
    fn.write('\n')
fn.close()



